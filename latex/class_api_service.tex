\doxysection{Dokumentacja klasy Api\+Service}
\hypertarget{class_api_service}{}\label{class_api_service}\index{ApiService@{ApiService}}


Odpowiada za pobieranie danych z publicznego API Głównego Inspektoratu Ochrony Środowiska (GIOS).  




{\ttfamily \#include $<$Api\+Service.\+h$>$}

Diagram dziedziczenia dla Api\+Service\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_api_service}
\end{center}
\end{figure}
\doxysubsubsection*{Sygnały}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_api_service_ad23a603a0f34e45afa78165923856e3c}{stations\+Ready}} (const std\+::vector$<$ \mbox{\hyperlink{struct_measuring_station}{Measuring\+Station}} $>$ \&stations)
\begin{DoxyCompactList}\small\item\em Sygnał emitowany, gdy lista stacji zostanie pomyślnie pobrana i sparsowana. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_api_service_a61456f2026b7d779452c71f7059b18ae}{sensors\+Ready}} (const std\+::vector$<$ \mbox{\hyperlink{struct_sensor}{Sensor}} $>$ \&sensors)
\begin{DoxyCompactList}\small\item\em Sygnał emitowany, gdy lista czujników dla danej stacji zostanie pomyślnie pobrana i sparsowana. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_api_service_a2a0a7a3bb25aa1d5f19acd1253f870c4}{sensor\+Data\+Ready}} (const \mbox{\hyperlink{struct_sensor_data}{Sensor\+Data}} \&data)
\begin{DoxyCompactList}\small\item\em Sygnał emitowany, gdy dane pomiarowe dla czujnika zostaną pomyślnie pobrane i sparsowane. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_api_service_a3af1acaff44a69277eceafb525dfdd7c}{air\+Quality\+Index\+Ready}} (const \mbox{\hyperlink{struct_air_quality_index}{Air\+Quality\+Index}} \&index)
\begin{DoxyCompactList}\small\item\em Sygnał emitowany, gdy indeks jakości powietrza (AQI) dla stacji zostanie pomyślnie pobrany i sparsowany. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_api_service_ae4eb4b4fe6824b7187dc57d4127e2480}{network\+Error}} (const QString \&error\+Msg)
\begin{DoxyCompactList}\small\item\em Sygnał emitowany w przypadku wystąpienia błędu podczas komunikacji sieciowej lub przetwarzania odpowiedzi z API. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Metody publiczne}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_api_service_a226aa6b3def14ec3330ba5d18bf7b96e}{Api\+Service}} (QObject \texorpdfstring{$\ast$}{*}parent=nullptr)
\begin{DoxyCompactList}\small\item\em Konstruktor klasy \doxylink{class_api_service}{Api\+Service}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_api_service_a76e456e97d9741a45fb49cd230a2139d}{fetch\+All\+Stations}} ()
\begin{DoxyCompactList}\small\item\em Rozpoczyna asynchroniczne pobieranie listy wszystkich stacji pomiarowych z API GIOS. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_api_service_a95d636a63522ff99fff9f1156ccd008e}{fetch\+Sensors\+For\+Station}} (int station\+Id)
\begin{DoxyCompactList}\small\item\em Rozpoczyna asynchroniczne pobieranie listy czujników (stanowisk pomiarowych) dla podanej stacji. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_api_service_a354cdb47564f10f2440f0b142ba37a08}{fetch\+Sensor\+Data}} (int sensor\+Id)
\begin{DoxyCompactList}\small\item\em Rozpoczyna asynchroniczne pobieranie danych pomiarowych (serii czasowej) dla podanego czujnika. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_api_service_a790d8f1173feffb5af26d3f8a874fa9e}{fetch\+Air\+Quality\+Index}} (int station\+Id)
\begin{DoxyCompactList}\small\item\em Rozpoczyna asynchroniczne pobieranie aktualnego indeksu jakości powietrza (AQI) dla podanej stacji. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Opis szczegółowy}
Odpowiada za pobieranie danych z publicznego API Głównego Inspektoratu Ochrony Środowiska (GIOS). 

Klasa wykonuje żądania sieciowe asynchronicznie w osobnych wątkach (używając Qt\+Concurrent) i emituje sygnały z wynikami (sparsowanymi danymi) lub informacjami o błędach sieciowych/parsowania. 

\doxysubsection{Dokumentacja konstruktora i destruktora}
\Hypertarget{class_api_service_a226aa6b3def14ec3330ba5d18bf7b96e}\index{ApiService@{ApiService}!ApiService@{ApiService}}
\index{ApiService@{ApiService}!ApiService@{ApiService}}
\doxysubsubsection{\texorpdfstring{ApiService()}{ApiService()}}
{\footnotesize\ttfamily \label{class_api_service_a226aa6b3def14ec3330ba5d18bf7b96e} 
Api\+Service\+::\+Api\+Service (\begin{DoxyParamCaption}\item[{QObject \texorpdfstring{$\ast$}{*}}]{parent}{ = {\ttfamily nullptr}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}



Konstruktor klasy \doxylink{class_api_service}{Api\+Service}. 


\begin{DoxyParams}{Parametry}
{\em parent} & Wskaźnik na obiekt nadrzędny (dla zarządzania pamięcią w Qt). \\
\hline
\end{DoxyParams}


\doxysubsection{Dokumentacja funkcji składowych}
\Hypertarget{class_api_service_a3af1acaff44a69277eceafb525dfdd7c}\index{ApiService@{ApiService}!airQualityIndexReady@{airQualityIndexReady}}
\index{airQualityIndexReady@{airQualityIndexReady}!ApiService@{ApiService}}
\doxysubsubsection{\texorpdfstring{airQualityIndexReady}{airQualityIndexReady}}
{\footnotesize\ttfamily \label{class_api_service_a3af1acaff44a69277eceafb525dfdd7c} 
void Api\+Service\+::air\+Quality\+Index\+Ready (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct_air_quality_index}{Air\+Quality\+Index}} \&}]{index}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [signal]}}



Sygnał emitowany, gdy indeks jakości powietrza (AQI) dla stacji zostanie pomyślnie pobrany i sparsowany. 


\begin{DoxyParams}{Parametry}
{\em index} & Obiekt \doxylink{struct_air_quality_index}{Air\+Quality\+Index} zawierający obliczone indeksy. \\
\hline
\end{DoxyParams}
\Hypertarget{class_api_service_a790d8f1173feffb5af26d3f8a874fa9e}\index{ApiService@{ApiService}!fetchAirQualityIndex@{fetchAirQualityIndex}}
\index{fetchAirQualityIndex@{fetchAirQualityIndex}!ApiService@{ApiService}}
\doxysubsubsection{\texorpdfstring{fetchAirQualityIndex()}{fetchAirQualityIndex()}}
{\footnotesize\ttfamily \label{class_api_service_a790d8f1173feffb5af26d3f8a874fa9e} 
void Api\+Service\+::fetch\+Air\+Quality\+Index (\begin{DoxyParamCaption}\item[{int}]{station\+Id}{}\end{DoxyParamCaption})}



Rozpoczyna asynchroniczne pobieranie aktualnego indeksu jakości powietrza (AQI) dla podanej stacji. 


\begin{DoxyParams}{Parametry}
{\em station\+Id} & Unikalny identyfikator stacji pomiarowej, dla której pobierany jest indeks AQI.\\
\hline
\end{DoxyParams}
Po pomyślnym zakończeniu operacji i sparsowaniu danych emitowany jest sygnał \doxylink{class_api_service_a3af1acaff44a69277eceafb525dfdd7c}{air\+Quality\+Index\+Ready()}. W przypadku błędu (np. 404 Not Found, błąd sieci, błąd parsowania) emitowany jest sygnał \doxylink{class_api_service_ae4eb4b4fe6824b7187dc57d4127e2480}{network\+Error()}. \begin{DoxyNote}{Nota}
Nie wszystkie stacje posiadają obliczony indeks AQI. 
\end{DoxyNote}
\Hypertarget{class_api_service_a76e456e97d9741a45fb49cd230a2139d}\index{ApiService@{ApiService}!fetchAllStations@{fetchAllStations}}
\index{fetchAllStations@{fetchAllStations}!ApiService@{ApiService}}
\doxysubsubsection{\texorpdfstring{fetchAllStations()}{fetchAllStations()}}
{\footnotesize\ttfamily \label{class_api_service_a76e456e97d9741a45fb49cd230a2139d} 
void Api\+Service\+::fetch\+All\+Stations (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Rozpoczyna asynchroniczne pobieranie listy wszystkich stacji pomiarowych z API GIOS. 

Po pomyślnym zakończeniu operacji i sparsowaniu danych emitowany jest sygnał \doxylink{class_api_service_ad23a603a0f34e45afa78165923856e3c}{stations\+Ready()}. W przypadku błędu emitowany jest sygnał \doxylink{class_api_service_ae4eb4b4fe6824b7187dc57d4127e2480}{network\+Error()}. \Hypertarget{class_api_service_a354cdb47564f10f2440f0b142ba37a08}\index{ApiService@{ApiService}!fetchSensorData@{fetchSensorData}}
\index{fetchSensorData@{fetchSensorData}!ApiService@{ApiService}}
\doxysubsubsection{\texorpdfstring{fetchSensorData()}{fetchSensorData()}}
{\footnotesize\ttfamily \label{class_api_service_a354cdb47564f10f2440f0b142ba37a08} 
void Api\+Service\+::fetch\+Sensor\+Data (\begin{DoxyParamCaption}\item[{int}]{sensor\+Id}{}\end{DoxyParamCaption})}



Rozpoczyna asynchroniczne pobieranie danych pomiarowych (serii czasowej) dla podanego czujnika. 


\begin{DoxyParams}{Parametry}
{\em sensor\+Id} & Unikalny identyfikator czujnika, dla którego pobierane są dane.\\
\hline
\end{DoxyParams}
Po pomyślnym zakończeniu operacji i sparsowaniu danych emitowany jest sygnał \doxylink{class_api_service_a2a0a7a3bb25aa1d5f19acd1253f870c4}{sensor\+Data\+Ready()}. W przypadku błędu emitowany jest sygnał \doxylink{class_api_service_ae4eb4b4fe6824b7187dc57d4127e2480}{network\+Error()}. Może również emitować sensor\+Data\+Ready z pustymi danymi, jeśli API zwróciło dane, ale bez wartości pomiarowych. \Hypertarget{class_api_service_a95d636a63522ff99fff9f1156ccd008e}\index{ApiService@{ApiService}!fetchSensorsForStation@{fetchSensorsForStation}}
\index{fetchSensorsForStation@{fetchSensorsForStation}!ApiService@{ApiService}}
\doxysubsubsection{\texorpdfstring{fetchSensorsForStation()}{fetchSensorsForStation()}}
{\footnotesize\ttfamily \label{class_api_service_a95d636a63522ff99fff9f1156ccd008e} 
void Api\+Service\+::fetch\+Sensors\+For\+Station (\begin{DoxyParamCaption}\item[{int}]{station\+Id}{}\end{DoxyParamCaption})}



Rozpoczyna asynchroniczne pobieranie listy czujników (stanowisk pomiarowych) dla podanej stacji. 


\begin{DoxyParams}{Parametry}
{\em station\+Id} & Unikalny identyfikator stacji pomiarowej, dla której pobierane są czujniki.\\
\hline
\end{DoxyParams}
Po pomyślnym zakończeniu operacji i sparsowaniu danych emitowany jest sygnał \doxylink{class_api_service_a61456f2026b7d779452c71f7059b18ae}{sensors\+Ready()}. W przypadku błędu emitowany jest sygnał \doxylink{class_api_service_ae4eb4b4fe6824b7187dc57d4127e2480}{network\+Error()}. \Hypertarget{class_api_service_ae4eb4b4fe6824b7187dc57d4127e2480}\index{ApiService@{ApiService}!networkError@{networkError}}
\index{networkError@{networkError}!ApiService@{ApiService}}
\doxysubsubsection{\texorpdfstring{networkError}{networkError}}
{\footnotesize\ttfamily \label{class_api_service_ae4eb4b4fe6824b7187dc57d4127e2480} 
void Api\+Service\+::network\+Error (\begin{DoxyParamCaption}\item[{const QString \&}]{error\+Msg}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [signal]}}



Sygnał emitowany w przypadku wystąpienia błędu podczas komunikacji sieciowej lub przetwarzania odpowiedzi z API. 


\begin{DoxyParams}{Parametry}
{\em error\+Msg} & Komunikat tekstowy opisujący napotkany błąd. \\
\hline
\end{DoxyParams}
\Hypertarget{class_api_service_a2a0a7a3bb25aa1d5f19acd1253f870c4}\index{ApiService@{ApiService}!sensorDataReady@{sensorDataReady}}
\index{sensorDataReady@{sensorDataReady}!ApiService@{ApiService}}
\doxysubsubsection{\texorpdfstring{sensorDataReady}{sensorDataReady}}
{\footnotesize\ttfamily \label{class_api_service_a2a0a7a3bb25aa1d5f19acd1253f870c4} 
void Api\+Service\+::sensor\+Data\+Ready (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct_sensor_data}{Sensor\+Data}} \&}]{data}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [signal]}}



Sygnał emitowany, gdy dane pomiarowe dla czujnika zostaną pomyślnie pobrane i sparsowane. 


\begin{DoxyParams}{Parametry}
{\em data} & Obiekt \doxylink{struct_sensor_data}{Sensor\+Data} zawierający klucz parametru i wektor wartości pomiarowych. Może zawierać pusty wektor wartości, jeśli API nie zwróciło pomiarów. \\
\hline
\end{DoxyParams}
\Hypertarget{class_api_service_a61456f2026b7d779452c71f7059b18ae}\index{ApiService@{ApiService}!sensorsReady@{sensorsReady}}
\index{sensorsReady@{sensorsReady}!ApiService@{ApiService}}
\doxysubsubsection{\texorpdfstring{sensorsReady}{sensorsReady}}
{\footnotesize\ttfamily \label{class_api_service_a61456f2026b7d779452c71f7059b18ae} 
void Api\+Service\+::sensors\+Ready (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ \mbox{\hyperlink{struct_sensor}{Sensor}} $>$ \&}]{sensors}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [signal]}}



Sygnał emitowany, gdy lista czujników dla danej stacji zostanie pomyślnie pobrana i sparsowana. 


\begin{DoxyParams}{Parametry}
{\em sensors} & Wektor obiektów \doxylink{struct_sensor}{Sensor} zawierający pobrane czujniki. \\
\hline
\end{DoxyParams}
\Hypertarget{class_api_service_ad23a603a0f34e45afa78165923856e3c}\index{ApiService@{ApiService}!stationsReady@{stationsReady}}
\index{stationsReady@{stationsReady}!ApiService@{ApiService}}
\doxysubsubsection{\texorpdfstring{stationsReady}{stationsReady}}
{\footnotesize\ttfamily \label{class_api_service_ad23a603a0f34e45afa78165923856e3c} 
void Api\+Service\+::stations\+Ready (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ \mbox{\hyperlink{struct_measuring_station}{Measuring\+Station}} $>$ \&}]{stations}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [signal]}}



Sygnał emitowany, gdy lista stacji zostanie pomyślnie pobrana i sparsowana. 


\begin{DoxyParams}{Parametry}
{\em stations} & Wektor obiektów \doxylink{struct_measuring_station}{Measuring\+Station} zawierający pobrane stacje. \\
\hline
\end{DoxyParams}


Dokumentacja dla tej klasy została wygenerowana z plików\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{_api_service_8h}{Api\+Service.\+h}}\item 
Api\+Service.\+cpp\end{DoxyCompactItemize}
